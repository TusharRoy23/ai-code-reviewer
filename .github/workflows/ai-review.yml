name: "Test AI Reviewer on Itself"

on:
    pull_request:
        types: [opened, synchronize]
    issue_comment:
        types: [created]

jobs:
    review:
        runs-on: ubuntu-latest
        permissions:
            contents: read
            pull-requests: write
            issues: write

        steps:
            # This calls YOUR OWN action from the current repo
            - uses: ./
              with:
                  openai-api-key: ${{ secrets.OPENAI_API_KEY }}
                  model: gpt-4o-mini
                  trigger-phrase: "@ai-reviewer test"
